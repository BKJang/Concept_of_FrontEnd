# Webpack과 Gulp 그리고 Grunt

현재 Build Tool의 대세는 당연코 Webpack이다. 
그런데 이 이전에는 Gulp와 Grunt가 있었다.

> Webpack과 Gulp&Grunt는 태생부터 다르다

<br/>

## Gulp와 Grunt

webpack과 gulp, grunt는 사실 아예 다르다. Gulp와 Grunt(이하 걸프로 통일)는 **Task Runner**라고 한다.
간단한 Task를 실행해주는 것이다. 
uglify나 압축등의 반복성 있는 간단한 작업을 자동화해주는 툴이다.

### Gulp vs Grunt

gulp와 grunt의 하는일은 같지만 만들어내는 방식이 다르다. 

grunt는 package.json처럼 **json형식으로 설정을 선언하여 사용**한다. 
이와 다르게 gulp는 **node.js의 스트림 기능을 이용하여 자바스크립트 코드를 사용**한다.

<br/>

## 모듈번들러(Module Bundler)

이전 툴들이 Task Runner인 것과 다르게 웹팩은 이름부터 다르다. 
**Module Bundler** 혹은 **Package Bundler** 라고 불린다.

모듈 번들러는 각각의 모듈들의 의존성을 파악하여 번들(묶는다)해준다.

### 모듈과 의존성

자바스크립트는 큰 소스를 나눠 편하게 개발하고 유지보수하기 위해 모듈이라는 추상적인 개념을 사용한다. 마치 클래스와 비슷하다. 
보통 이렇게 모듈 방식으로 코딩을하고 거기에 모듈별로 파일까지 나누어 개발하게 된다.

모듈화 된 각각의 파일들은 서로의 의존성을 가진다. 
의존성이란 쉽게 말해 `import * from './index'` 혹은 `require('./index')` 이 구문이다. 
현재 파일에서 다른 파일을 이용하게되면 서로 의존성이 생긴다.

그런데 브라우저 상에서는 이러한 의존성을 표현하기가 어렵다. 특히 HTTP/1.1을 사용해야 하는 환경이라면 더욱 힘들다.

> HTTP/2.0의 경우 **한 번의 요청에 여러 파일**을 받아올 수 있지만, HTTP/1.1의 경우는 의존성을 통해 **여러 파일이 필요하게 된다면 너무 많은 네트워크 자원을 소모**하게 된다.

<br/>

## Webpack

의존성으로 엮인 JS파일들을 하나의 JS파일로 압축해서 만들면 주는 역할을 하는 것이 Webpack이다.
물론, 꼭 하나가 아니라 라이브러리 / 핵심 소스를 나누어 파일을 두개로 분기할 수도 있다.

요점은 다양한 파일들을 번들(bundle)해서 **네트워크 비용을 최소화하여 파일을 번들한다**라는 것이다.

> Gulp나 Grunt처럼 필요한 자동화 기능까지 더해 빌드 해주는 것이 바로 모듈 번들러다.

Webpack은 위에서 말한 자바스크립트의 의존성을 파악하여 번들하는 것만이 아니다. 
**모든 리소스(javascript, css, image, font, 심지어 typescript, coffeescript, less, sass 등)에 대한 dependancy graph를 생성하여 빌드** 시켜준다.

<br/>

![eventloop](/JavaScript/images/webpack.png)

<br/>

요즘처럼 SPA를 구현하게 되면 이러한 의존성은 꼬리에 꼬리를 물고 Graph(Tree) 형태로 만들어지게 된다. 이를 번들링하여 하나의 js 파일로 만들어주는게 모듈 번들러의 역할이다.

### Webpack vs Gulp & Grunt

두 종류의 빌드 툴 모두 리소스들을 압축한다는 공통점이 있다. 

Gulp나 Grunt는 **단순 자동화 작업으로 파일을 압축하는 작업**을 많이 하게 된다. 
그러나 Webpack의 경우 자바스크립트의 **각 모듈 혹은 파일, 심지어는 다양한 리소스들까지 의존성을 파악하여 묶어주기** 때문에 엄청나게 큰 차이점을 보인다.

따라서 현재 코드가 **모듈화 된 코드가 아니거나, 다양한 의존성을 다루어야 하는 작업이 아니라면** Gulp나 Grunt도 충분히 좋은 빌드 툴이 될 수 있다. 

그러나 **꽤 준수한 프로젝트 규모를 가지거나, 자바스크립트를 모듈화하여 코딩하거나, 무거워질 수 밖에 없는 프레임워크를 사용**하는 프로젝트 등에는 웹팩이 훨씬 더 좋은 툴이 될 것입니다.